define("gondor/view/sidebar",["lib/jquery","mod/lang","mod/template","gondor/observer","gondor/view/dashboard","mod/domready"],function(g,o,d,l,n){var e=6,b=250,j='<div class="loading"></div>',i,f="",m="",c="",h="",k=g(window);var a={width:b,init:function(p){this.wrapper=p.wrapper;this.box=this.wrapper.find(".box");this.header=this.box.find(".hd");this.content=this.box.find(".bd")},enable:function(){i=true;this.updateSize()},updateSize:function(){this.box.css("height",k.height()-n.height+"px");if(i){this.box.css({overflow:this.width>e?"":"hidden",width:(this.width-1<0?0:this.width-1)+"px"})}},updateLocalInfo:function(p){this.box[0].scrollTop=0;this.header[0].innerHTML=c=this.getLocalInfo(p)},updateLocalList:function(q){var p=this.getLocalList(q);if(p){this.content[0].innerHTML=h=p}},getLocalInfo:function(p){return d.convertTpl("tplLocalInfo",p,"info")},getLocalList:function(p){if(p.streets){return d.convertTpl("tplNodeList",p,"data")}else{if(p.news){return d.convertTpl("tplGlobalList",p,"data")}else{if(p.local_info){return d.convertTpl("tplLocalList",p,"data")}}}},clearHead:function(){this.header[0].innerHTML=j;c=""},clearContent:function(){this.content[0].innerHTML=j;h=""},saveLocal:function(){f=c;m=h},saveLocalInfo:function(p){f=c=p||c},saveLocalList:function(p){m=h=p||h},restoreLocal:function(){this.header[0].innerHTML=c=f;this.content[0].innerHTML=h=m},hide:function(){this.wrapper.addClass("disabled")},show:function(){this.wrapper.removeClass("disabled")},toggle:function(){if(this.width===b){this.width=e}else{this.width=b}l.fire("sidebar:toggle")}};return a});