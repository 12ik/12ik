define("gondor/view/shop",["lib/jquery","mod/lang","mod/template","gondor/observer","gondor/view/dialog","gondor/view/place"],function(f,d,b,a,e,c){var g=d.mix(Object.create(c),{init:function(h){c.init.call(this,h);this.placeType="shop";this.zooming=false},zoom:function(j){var h=this,i=f(this.canvas.viewport);this.zooming=true;a.fire("place:enable",[this]);a.fire("place:enter",[h.placeType,j]);a.wait("viewport:ready",function(){a.fire("place:zoom-waiting");i.removeClass("disabled");setTimeout(function(){h.zooming=false;a.fire("place:zoom-ready")},10)})},showAdmin:function(k,j){var h=this,i=typeof k!=="number"?k:"/api/place/"+k+"/admin?cate="+(j||"apps");e.set({isHideTitle:true,iframeURL:i,width:600,buttons:[]}).open()},updatePlaceInfo:function(h){this.expireBtn=false;return c.updatePlaceInfo.call(this,h)},expireAlert:function(h){if(!this.expireBtn){this.expireBtn=this.placard.find("a.shop-admin-btn").addClass("shop-admin-expire-btn").attr("href",function(i){return this.href.replace("cate=apps","cate=lease")}).html('<span class="shop-admin-btn shop-admin-expire-btn">本次租期还剩'+h+"</span>")}}});return g});