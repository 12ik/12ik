define("gondor/view/house",["lib/jquery","mod/lang","mod/template","gondor/observer","gondor/view/town","gondor/view/place"],function(e,i,c,f,g,d){var h={transformProperty:1,MozTransform:1,WebkitTransform:1,OTransform:1},a;var b=i.mix(Object.create(d),{init:function(j){d.init.call(this,j);this.placeType="home"},open:function(o,j,l,m){var k=e("."+this.getNodeStr(o)),n=k.find([".place",parseInt(o,10),j].join("-")).find(".house-doors").eq(l-1);if(!n[0]){return}var p=n.offset();this.houseEnabled=j;g.folderViewVertical=k.hasClass("vertical");g.openFolder([p.left,p.top-40,n[0].offsetWidth,n[0].offsetHeight],"houseDetail",m).wait(function(){f.fire("houseDetail:open",[j,l])})},close:function(){this.houseEnabled=false;g.closeFolder().wait(function(){f.fire("houseDetail:close")})},renderDoors:function(j){g.fillFolder(c.convertTpl("tplHouseList",j),function(){f.fire("houseDetail:ready")})},findDoor:function(k,j){j(g.folderView.find(".door-"+k))},zoom:function(l){var j=this,k=e(this.canvas.viewport);f.fire("place:enable",[this]);f.fire("place:enter",[j.placeType,l]);f.wait("viewport:ready",function(){f.fire("place:zoom-waiting");k.removeClass("disabled");setTimeout(function(){f.fire("place:zoom-ready");g.closeFolder(10)},10)})}});return b});